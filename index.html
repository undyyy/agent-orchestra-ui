<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Agent Orchestra â€” tmux wall</title>
  <style>
    :root {
      --bg:#0a0f1a;
      --panel:#111827;
      --border:#24324d;
      --text:#dbe7ff;
      --muted:#97acd6;
      --ok:#34d399;
    }
    * { box-sizing: border-box; }
    body {
      margin:0;
      background:var(--bg);
      color:var(--text);
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }
    .wrap { max-width: 1400px; margin: 0 auto; padding: 16px; }
    .top {
      display:flex; justify-content:space-between; align-items:center;
      margin-bottom:14px;
    }
    .title { font-size:22px; font-weight:700; }
    .sub { color:var(--muted); font-size:13px; }

    .controls {
      display:flex; gap:8px; flex-wrap:wrap;
      margin-bottom:14px;
    }
    select, input, button {
      background:#16233b;
      color:var(--text);
      border:1px solid #335081;
      border-radius:8px;
      padding:8px 10px;
    }
    button { cursor:pointer; }
    button:hover { background:#1e3153; }

    .grid {
      display:grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap:12px;
    }

    .pane {
      border:1px solid var(--border);
      border-radius:12px;
      overflow:hidden;
      background:var(--panel);
    }
    .pane-head {
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding:10px 12px;
      border-bottom:1px solid var(--border);
      background:#0f182a;
      font-size:13px;
    }
    .chip {
      font-size:12px;
      border:1px solid #2f4f7e;
      background:#172a47;
      border-radius:999px;
      padding:4px 8px;
      color:#c7ddff;
    }
    .term {
      height:280px;
      overflow:auto;
      padding:10px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
      font-size:12px;
      line-height:1.45;
      background:#0b1220;
      color:#cce0ff;
      white-space:pre-wrap;
    }
    .term .ok { color: var(--ok); }
    .pane-input {
      border-top:1px solid var(--border);
      display:flex;
      gap:8px;
      padding:10px;
      background:#0f182a;
    }
    .pane-input input { flex:1; }

    .note {
      margin-top:12px;
      color:var(--muted);
      font-size:12px;
      border:1px dashed #2b4066;
      border-radius:10px;
      padding:10px;
      background:#0e1728;
    }

    @media (max-width: 980px) {
      .grid { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="top">
      <div>
        <div class="title">ðŸ§µ Agent tmux Wall</div>
        <div class="sub">Each agent is viewed like a direct remote tmux pane.</div>
      </div>
      <div class="chip">Simplified v1</div>
    </div>

    <div class="controls">
      <select id="newAgent">
        <option value="planner-1">planner-1</option>
        <option value="coder-2">coder-2</option>
        <option value="tester-3">tester-3</option>
        <option value="ops-1">ops-1</option>
      </select>
      <button onclick="focusAgent()">Focus Agent</button>
      <button onclick="broadcast('status')">Broadcast: status</button>
      <button onclick="broadcast('pytest -q')">Broadcast: pytest -q</button>
      <button onclick="broadcast('git status')">Broadcast: git status</button>
    </div>

    <div class="grid" id="grid"></div>

    <div class="note">
      <strong>Design intent:</strong> keep orchestration dead simple â€” a wall of panes + optional broadcast input.
      Backend hookup would map each pane to a real tmux session/pane via websocket.
    </div>
  </div>

  <script>
    const agents = [
      { id:'planner-1', session:'orch', pane:'0.0', logs:[
        '[09:42:11] attached to tmux orch:0.0',
        '[09:42:15] planning backlog split for epic #42',
        '[09:42:22] <ok> ready for next command'
      ]},
      { id:'coder-2', session:'orch', pane:'0.1', logs:[
        '[09:42:09] attached to tmux orch:0.1',
        '[09:42:16] editing src/auth/middleware.ts',
        '[09:42:29] running targeted tests...'
      ]},
      { id:'tester-3', session:'orch', pane:'1.0', logs:[
        '[09:42:08] attached to tmux orch:1.0',
        '[09:42:19] pytest -q tests/integration',
        '[09:42:36] 48 passed, 2 flaky retries'
      ]},
      { id:'ops-1', session:'orch', pane:'1.1', logs:[
        '[09:42:05] attached to tmux orch:1.1',
        '[09:42:17] checking deploy health',
        '[09:42:31] memory stable: 27%'
      ]}
    ];

    const grid = document.getElementById('grid');

    function render() {
      grid.innerHTML = agents.map(a => `
        <div class="pane" id="pane-${a.id}">
          <div class="pane-head">
            <div><strong>${a.id}</strong> <span style="color:#97acd6">(${a.session}:${a.pane})</span></div>
            <span class="chip">live</span>
          </div>
          <div class="term" id="term-${a.id}">${a.logs.join('\n')}</div>
          <div class="pane-input">
            <input id="in-${a.id}" placeholder="send command to ${a.id} (tmux send-keys)" />
            <button onclick="send('${a.id}')">Send</button>
          </div>
        </div>
      `).join('');
      agents.forEach(a => {
        const term = document.getElementById(`term-${a.id}`);
        term.scrollTop = term.scrollHeight;
      });
    }

    function append(agentId, line) {
      const a = agents.find(x => x.id === agentId);
      if (!a) return;
      const t = new Date().toLocaleTimeString();
      a.logs.push(`[${t}] ${line}`);
      if (a.logs.length > 120) a.logs.shift();
      render();
    }

    function send(agentId) {
      const el = document.getElementById(`in-${agentId}`);
      const cmd = (el.value || '').trim();
      if (!cmd) return;
      append(agentId, `$ ${cmd}`);
      append(agentId, `<ok> command queued`);
      el.value = '';
    }

    function broadcast(cmd) {
      agents.forEach(a => append(a.id, `$ ${cmd}`));
      agents.forEach(a => append(a.id, `<ok> command queued`));
    }

    function focusAgent() {
      const id = document.getElementById('newAgent').value;
      const pane = document.getElementById(`pane-${id}`);
      if (pane) pane.scrollIntoView({ behavior:'smooth', block:'center' });
      append(id, '<ok> focused in UI');
    }

    // tiny fake live stream
    setInterval(() => {
      const sample = [
        'heartbeat ok',
        'stdout: task progress +1 step',
        'running quick check',
        '<ok> awaiting instruction'
      ];
      const a = agents[Math.floor(Math.random() * agents.length)];
      append(a.id, sample[Math.floor(Math.random() * sample.length)]);
    }, 5000);

    render();
  </script>
</body>
</html>
